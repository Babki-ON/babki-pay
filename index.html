
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Babki Compute - dApp</title>
</head>
<body style="background-color: #0f0f1a; color: white; font-family: monospace; text-align: center; padding-top: 50px;">
  <h1>Babki Compute (Babki_ON)</h1>
  <p>–î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è. –°–æ—Ü–∏–∞–ª—å–Ω—ã–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç.</p>

  <button onclick="connectWallet()" style="padding: 10px 20px;">üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫</button>
  <p id="walletAddress" style="margin-top: 20px;"></p>

  <h3>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–¥–∞—á—É:</h3>
  <textarea id="taskInput" rows="4" cols="50" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å SHA256 –æ—Ç —á–∏—Å–ª–∞ 2025"></textarea><br><br>
  <button onclick="submitTask()" style="padding: 10px 20px;">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button><br><br>

  <button onclick="payTask()" style="padding: 10px 20px; background-color: green; color: white;">üí∞ –û–ø–ª–∞—Ç–∏—Ç—å –∑–∞–¥–∞—á—É (100 BABK)</button>

  <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
  <script>
    let userAccount = "";
    const tokenAddress = "0x8045fbde04416af5bf677d7a9acbf5453eec5c59";
    const recipient = "0x6c1e0a4B4Ba479C01fcd97e9df46b016A7E10169";

    async function connectWallet() {
      if (window.ethereum) {
        await window.ethereum.request({ method: "eth_requestAccounts" });
        window.web3 = new Web3(window.ethereum);
        const accounts = await web3.eth.getAccounts();
        userAccount = accounts[0];
        document.getElementById("walletAddress").innerText = "–ö–æ—à–µ–ª—ë–∫: " + userAccount;
      } else {
        alert("–£—Å—Ç–∞–Ω–æ–≤–∏ MetaMask!");
      }
    }

    function submitTask() {
      const task = document.getElementById("taskInput").value;
      if (!task) return alert("–ü—É—Å—Ç–æ–µ –ø–æ–ª–µ –∑–∞–¥–∞—á–∏!");
      console.log("–ó–∞–¥–∞—á–∞ –æ—Ç", userAccount, ":", task);
      alert("–ó–∞–¥–∞—á–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ (–≤ –∫–æ–Ω—Å–æ–ª—å). –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–µ–∫–æ–º.");
    }

    async function payTask() {
      if (!window.ethereum || !userAccount) return alert("–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏ –∫–æ—à–µ–ª—ë–∫");

      const minABI = [
        {
          "constant": false,
          "inputs": [
            { "name": "_to", "type": "address" },
            { "name": "_value", "type": "uint256" }
          ],
          "name": "transfer",
          "outputs": [{ "name": "", "type": "bool" }],
          "type": "function"
        }
      ];

      const contract = new web3.eth.Contract(minABI, tokenAddress);

      try {
        const amount = web3.utils.toWei("100", "ether");
        const tx = await contract.methods.transfer(recipient, amount).send({ from: userAccount });
        alert("–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞! –•—ç—à: " + tx.transactionHash);
      } catch (e) {
        console.error(e);
        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ –∑–∞–¥–∞—á–∏");
      }
    }
  </script>
</body>
</html>
